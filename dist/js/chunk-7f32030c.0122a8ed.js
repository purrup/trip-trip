(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f32030c"],{"02f0":function(t,e,i){},"0e55":function(t,e,i){},"169a":function(t,e,i){"use strict";i("368e");var s=i("4ad4"),a=i("b848"),n=i("75eb"),r=(i("3c93"),i("a9ad")),l=i("7560"),o=i("f2e7"),h=i("58df"),c=Object(h["a"])(r["a"],l["a"],o["a"]).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim(){const t=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",t)},classes(){return{"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive,...this.themeClasses}},computedOpacity(){return Number(this.isActive?this.opacity:0)},styles(){return{zIndex:this.zIndex}}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render(t){const e=[this.__scrim];return this.isActive&&e.push(this.genContent()),t("div",{staticClass:"v-overlay",class:this.classes,style:this.styles},e)}}),d=c,u=i("80d2"),m=i("2b0e"),p=m["a"].extend().extend({name:"overlayable",props:{hideOverlay:Boolean},data(){return{overlay:null}},watch:{hideOverlay(t){t?this.removeOverlay():this.genOverlay()}},beforeDestroy(){this.removeOverlay()},methods:{createOverlay(){const t=new d({propsData:{absolute:this.absolute,value:!1}});t.$mount();const e=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");e&&e.insertBefore(t.$el,e.firstChild),this.overlay=t},genOverlay(){if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),requestAnimationFrame(()=>{this.overlay&&(void 0!==this.activeZIndex&&(this.overlay.zIndex=String(this.activeZIndex-1)),this.overlay.value=!0)}),!0},removeOverlay(t=!0){this.overlay&&(Object(u["a"])(this.overlay.$el,"transitionend",()=>{this.overlay&&this.overlay.$el&&this.overlay.$el.parentNode&&!this.overlay.value&&(this.overlay.$el.parentNode.removeChild(this.overlay.$el),this.overlay.$destroy(),this.overlay=null)}),this.overlay.value=!1),t&&this.showScroll()},scrollListener(t){if("keydown"===t.type){if(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)||t.target.isContentEditable)return;const e=[u["w"].up,u["w"].pageup],i=[u["w"].down,u["w"].pagedown];if(e.includes(t.keyCode))t.deltaY=-1;else{if(!i.includes(t.keyCode))return;t.deltaY=1}}(t.target===this.overlay||"keydown"!==t.type&&t.target===document.body||this.checkPath(t))&&t.preventDefault()},hasScrollbar(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return["auto","scroll"].includes(e.overflowY)&&t.scrollHeight>t.clientHeight},shouldScroll(t,e){return 0===t.scrollTop&&e<0||t.scrollTop+t.clientHeight===t.scrollHeight&&e>0},isInside(t,e){return t===e||null!==t&&t!==document.body&&this.isInside(t.parentNode,e)},checkPath(t){const e=t.path||this.composedPath(t),i=t.deltaY;if("keydown"===t.type&&e[0]===document.body){const t=this.$refs.dialog,e=window.getSelection().anchorNode;return!(t&&this.hasScrollbar(t)&&this.isInside(e,t))||this.shouldScroll(t,i)}for(let s=0;s<e.length;s++){const t=e[s];if(t===document)return!0;if(t===document.documentElement)return!0;if(t===this.$refs.content)return!0;if(this.hasScrollbar(t))return this.shouldScroll(t,i)}return!0},composedPath(t){if(t.composedPath)return t.composedPath();const e=[];let i=t.target;while(i){if(e.push(i),"HTML"===i.tagName)return e.push(document),e.push(window),e;i=i.parentElement}return e},hideScroll(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):(Object(u["b"])(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}}),v=i("e4d3"),g=i("21be"),y=i("a293"),f=i("bfc5");const b=Object(h["a"])(s["a"],a["a"],n["a"],p,v["a"],g["a"],o["a"]);e["a"]=b.extend({name:"v-dialog",directives:{ClickOutside:y["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,fullWidth:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},beforeMount(){this.$nextTick(()=>{this.isBooted=this.isActive,this.isActive&&this.show()})},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick(()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout(()=>this.animate=!1,150)})},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e))&&(this.$emit("click:outside"),this.persistent?(this.noClickAnimation||this.overlay!==e||this.animateClick(),!1):this.activeZIndex>=this.getMaxZIndex())},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):p.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$refs.content.focus(),this.bind()},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onKeydown(t){if(t.keyCode===u["w"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick(()=>t&&t.focus())}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some(t=>t.contains(e))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t.length&&t[0].focus()}}},render(t){const e=[],i={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:()=>{this.isActive=!1},args:{closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],on:{click:t=>{t.stopPropagation()}},style:{}};this.fullscreen||(i.style={maxWidth:"none"===this.maxWidth?void 0:Object(u["f"])(this.maxWidth),width:"auto"===this.width?void 0:Object(u["f"])(this.width)}),e.push(this.genActivator());let s=t("div",i,this.showLazyContent(this.getContentSlot()));return this.transition&&(s=t("transition",{props:{name:this.transition,origin:this.origin}},[s])),e.push(t("div",{class:this.contentClasses,attrs:{role:"document",tabindex:0,...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.$createElement(f["a"],{props:{root:!0,light:this.light,dark:this.dark}},[s])])),t("div",{staticClass:"v-dialog__container",attrs:{role:"dialog"},style:{display:!this.hasActivator||this.fullWidth?"block":"inline-block"}},e)}})},"1e09":function(t,e,i){},2102:function(t,e,i){},"368e":function(t,e,i){},"3c93":function(t,e,i){},"41e7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"trip"}},[i("main",[i("edit-buttons-group",{staticClass:"edit-buttons-group"}),i("div",{attrs:{id:"toggle-bar"}},[i("v-list",{staticStyle:{padding:"0px"}},[i("v-list-item-group",{attrs:{mandatory:""}},[i("v-list-item",{staticClass:"leftTogglebarBlock",on:{click:function(e){t.isShowOverview=!0}}},[i("v-list-item-content",[i("v-list-item-title",{staticClass:"text-center",domProps:{textContent:t._s("概覽")}})],1)],1),t._l(t.datesOfTrip,function(e,s){return i("v-list-item",{key:"toggle-bar-"+e,staticClass:"leftTogglebarBlock",on:{click:function(e){return t.toggleContent(s)}}},[i("v-list-item-content",[i("v-list-item-title",{staticClass:"text-center",domProps:{textContent:t._s(s+1)}},[t._v("// 左側togglebar顯示第i+1天")])],1)],1)}),t.isOnEditMode?i("v-list-item",{staticClass:"leftTogglebarBlock",on:{click:t.ADD_TRIP_date}},[i("v-list-item-content",[i("v-list-item-title",{staticClass:"text-center"},[i("v-icon",[t._v("mdi-plus")])],1)],1)],1):t._e()],2)],1)],1),i("div",{attrs:{id:"content"}},[t.isShowOverview?i("overview",{attrs:{trip:t.trip}}):i("trip-schedule",{staticClass:"trip-schedule",attrs:{dayOfTrip:t.dayOfTrip,datesOfTrip:t.datesOfTrip},on:{toggleContent:t.toggleContent,showMarkerAnimation:t.showMarkerAnimation,clearMarkerAnimation:t.clearMarkerAnimation}})],1)],1),i("div",{attrs:{id:"map"}})])},a=[],n=i("2dc1"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"trip-schedule"},[i("div",[i("v-sheet",{staticClass:"mb-3 d-flex justify-start align-center",attrs:{width:"370",height:"47",color:"grey lighten-2",elevation:"2"}},[t.isOnEditMode&&!t.showEditDailySchedulePanel?i("v-icon",{staticStyle:{width:"40px",padding:"10px 0px"},on:{click:function(e){t.showEditDailySchedulePanel=!t.showEditDailySchedulePanel}}},[t._v("mdi-dots-vertical")]):t._e(),t.showEditDailySchedulePanel?t._e():i("span",{staticClass:"text-center",staticStyle:{width:"calc(100% - 40px)","margin-right":"40px"}},[t._v(t._s(t.displayDate))]),t.showEditDailySchedulePanel&&t.isOnEditMode?[i("v-icon",{attrs:{large:""},on:{click:function(e){t.showEditDailySchedulePanel=!t.showEditDailySchedulePanel}}},[t._v("keyboard_arrow_left")]),i("v-spacer"),i("v-icon",{staticClass:"mr-4",on:{click:t.deleteDate}},[t._v("mdi-trash-can-outline")])]:t._e()],2),i("div",{staticClass:"schedule-list"},[t._l(t.trip.contents[t.dayOfTrip].activities,function(e,s){return i("v-sheet",{key:e.startTime+"-"+s,staticClass:"mb-3",attrs:{width:"370",height:"47",color:"white",elevation:"2"},nativeOn:{mouseover:function(i){return t.toggleCurrentActivity(e)},mouseout:function(i){return t.clearMarkerAnimation(e)}}},[t.showEditActivityPanel?t.showEditActivityPanel?i("div",{staticClass:"schedule-card-edit"},[t.showEditActivityPanel?i("v-icon",{staticClass:"back",attrs:{large:""},on:{click:function(e){t.showEditActivityPanel=!1}}},[t._v("keyboard_arrow_left")]):t._e(),i("v-icon",{staticClass:"time",on:{click:function(i){return t.displayTimePicker(e)}}},[t._v("mdi-clock-outline")]),i("div",{staticClass:"cost d-flex flex-nowrap flex-row"},[i("span",{staticClass:"mr-1"},[t._v("$")]),i("input",{staticStyle:{width:"50px"},attrs:{id:"activityCost",type:"number"},domProps:{value:e.cost},on:{change:t.updateAvtivity}})]),t.currentActivity.placeId?t.currentActivity.placeId?i("div",{staticClass:"activity"},[t._v(t._s(e.name))]):t._e():i("input",{staticClass:"activity",staticStyle:{width:"169px"},attrs:{id:"avtivityName"},domProps:{value:e.name},on:{change:t.updateAvtivity}}),i("v-icon",{staticClass:"delete-activity",on:{click:function(i){return t.DELETE_TRIP_activity({deletedActivity:e,dayOfTrip:t.dayOfTrip})}}},[t._v("mdi-trash-can-outline")])],1):t._e():i("div",{staticClass:"schedule-card"},[t.isOnEditMode&&!t.showEditActivityPanel?i("v-icon",{staticClass:"dots-vertical",staticStyle:{width:"40px"},on:{click:function(e){t.showEditActivityPanel=!0}}},[t._v("mdi-dots-vertical")]):t._e(),i("div",{staticClass:"time"},[t._v(t._s(new Date(e.startTime).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"})+" ~ "+new Date(e.endTime).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"})))]),i("div",{staticClass:"activity"},[t._v(t._s(e.name))]),i("div",{staticClass:"cost"},[t._v(t._s("$"+e.cost))])],1)])}),t.isOnEditMode?i("v-sheet",{staticClass:"d-flex justify-center",staticStyle:{opacity:"0.6"},attrs:{width:"370",height:"47",elevation:"2"}},[i("v-icon",{on:{click:t.addNewActivity}},[t._v("mdi-plus")])],1):t._e(),i("div",{staticClass:"note mt-8"},[t.isOnEditMode?i("v-textarea",{attrs:{"auto-grow":"",rows:"1",value:t.note,label:"備註:"},on:{change:t.updateNote}}):i("v-sheet",{staticClass:"d-flex flex-wrap align-start",attrs:{width:"370",color:"grey lighten-4",elevation:"2"}},[i("div",{staticClass:"col-auto"},[i("span",{staticStyle:{width:"100%"}},[t._v("備註：")]),i("p",{staticClass:"my-4"},[t._v(t._s(t.note))])])])],1),i("v-dialog",{attrs:{width:"600",height:"500"},model:{value:t.showTimePicker,callback:function(e){t.showTimePicker=e},expression:"showTimePicker"}},[i("v-card",[i("div",{staticClass:"container pt-10 mb-6"},[i("div",{staticClass:"timePickersGroup d-flex flex-row flex-nowrap justify-center align-center"},[i("span",{staticClass:"mx-5"},[t._v("開始時間")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.startTime,expression:"startTime"}],staticStyle:{padding:"10px"},attrs:{type:"time",id:"startTime"},domProps:{value:t.startTime},on:{change:t.updateAvtivity,input:function(e){e.target.composing||(t.startTime=e.target.value)}}}),i("div",{staticClass:"px-5"}),i("span",{staticClass:"mx-5"},[t._v("結束時間")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.endTime,expression:"endTime"}],staticStyle:{padding:"10px"},attrs:{type:"time",id:"endTime"},domProps:{value:t.endTime},on:{change:t.updateAvtivity,input:function(e){e.target.composing||(t.endTime=e.target.value)}}})])]),i("v-card-actions",[i("div",{staticClass:"flex-grow-1"}),i("div",{staticClass:"btnGroup mb-3"},[i("v-btn",{attrs:{color:"info"},on:{click:function(e){t.showTimePicker=!1}}},[t._v("確定")]),i("v-btn",{staticClass:"mx-5",attrs:{color:"error"},on:{click:function(e){t.showTimePicker=!1}}},[t._v("取消")])],1)])],1)],1)],2)],1),i("div",[i("v-sheet",{staticClass:"mb-3 d-flex justify-start align-center",attrs:{width:"250",height:"47",color:"grey lighten-2",elevation:"2"}},[i("span",{staticClass:"text-center subtitle-1",staticStyle:{width:"100%",cursor:"default"}},[t._v("景點資訊")])]),i("little-card",{key:t.currentActivity.placeId,attrs:{item:t.currentActivity,type:"site"}})],1)])},l=[],o=i("52f9"),h=i("2f62"),c={name:"TripSchedule",components:{LittleCard:o["a"]},props:{dayOfTrip:Number,datesOfTrip:Array},data(){return{showEditDailySchedulePanel:!1,showEditActivityPanel:!1,showTimePicker:!1,currentActivity:{}}},created(){this.currentActivity=this.trip.contents[this.dayOfTrip].activities[0]?this.trip.contents[this.dayOfTrip].activities[0]:{placeId:"prevent error"}},computed:{...Object(h["e"])("trip",{trip:t=>t.trip,isOnEditMode:t=>t.isOnEditMode}),displayDate(){return this.datesOfTrip[this.dayOfTrip].toLocaleDateString()+" "+this.datesOfTrip[this.dayOfTrip].toLocaleDateString("zh-TW",{weekday:"short"})},note(){return this.trip.contents[this.dayOfTrip].note},startTime(){if(this.currentActivity)return new Date(this.currentActivity.startTime).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"})},endTime(){if(this.currentActivity)return new Date(this.currentActivity.endTime).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"})}},methods:{...Object(h["d"])("trip",["DELETE_TRIP_date","ADD_TRIP_activity","DELETE_TRIP_activity","UPDATE_TRIP_note","UPDATE_TRIP_activity"]),toggleCurrentActivity(t){t.geometry&&this.$emit("showMarkerAnimation",t.geometry,t.placeId),this.currentActivity=t},clearMarkerAnimation(t){t.geometry&&this.$emit("clearMarkerAnimation",t.geometry,t.placeId)},deleteDate(){this.$emit("toggleContent",this.dayOfTrip-1),this.DELETE_TRIP_date(this.dayOfTrip)},addNewActivity(){const t={name:"",cost:0,startTime:Date.now(),endTime:Date.now()};this.ADD_TRIP_activity({newActivity:t,dayOfTrip:this.dayOfTrip})},displayTimePicker(t){this.currentActivity=t,this.showTimePicker=!0},updateAvtivity(t){const e=this.dayOfTrip,i=this.currentActivity,s=this.datesOfTrip[this.dayOfTrip].toLocaleDateString();let a=this.currentActivity;if("startTime"===t.target.id){const e=s+" "+t.target.value+":00";a.startTime=new Date(e)}else if("endTime"===t.target.id){const e=s+" "+t.target.value+":00";a.endTime=new Date(e)}else"avtivityName"===t.target.id?a.name=t.target.value:"activityCost"===t.target.id&&(a.cost=t.target.value);this.UPDATE_TRIP_activity({data:a,dayOfTrip:e,activity:i})},updateNote(t){const e=this.dayOfTrip;this.UPDATE_TRIP_note({note:t,dayOfTrip:e})}},watch:{isOnEditMode(t){!1===t&&(this.showEditDailySchedulePanel=!1,this.showEditActivityPanel=!1,this.showTimePicker=!1)},dayOfTrip(){this.currentActivity=this.trip.contents[this.dayOfTrip].activities[0]?this.trip.contents[this.dayOfTrip].activities[0]:{placeId:"prevent error"}}}},d=c,u=(i("4981"),i("2877")),m=i("6544"),p=i.n(m),v=i("8336"),g=i("b0af"),y=i("99d9"),f=i("169a"),b=i("132d"),w=i("8dd9"),k=i("2fa4"),C=i("a844"),T=Object(u["a"])(d,r,l,!1,null,"2bf7fb70",null),_=T.exports;p()(T,{VBtn:v["a"],VCard:g["a"],VCardActions:y["a"],VDialog:f["a"],VIcon:b["a"],VSheet:w["a"],VSpacer:k["a"],VTextarea:C["a"]});var D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-buttons-group-root"},[i("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isOnEditMode?t._e():i("div",{staticClass:"d-flex flex-nowrap align-center buttons-row"},[t.$route.path==="/trips/"+t.$route.params.id&&t.trip.userId!==t.account._id?i("v-btn",{attrs:{text:"",elevation:"2",medium:""},on:{click:t.fork}},[t._v("複製行程"),i("v-icon",{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-content-copy")])],1):t.$route.path!=="/trips/"+t.$route.params.id||t.isOnEditMode||t.trip.userId!==t.account._id?t._e():i("v-btn",{attrs:{text:"",elevation:"2",medium:""},on:{click:t.toggleEditMode}},[t._v("編輯行程"),i("v-icon",{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-pencil-outline")])],1)],1)]),i("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isOnEditMode?i("div",{staticClass:"d-flex flex-nowrap align-center buttons-row"},[i("v-btn",{attrs:{text:"",elevation:"2",medium:""},on:{click:t.editComplete}},[t._v("編輯完成"),i("v-icon",{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-check-box-outline")])],1),i("div",{staticClass:"calendarButton ml-8"},[i("v-btn",{attrs:{text:"",elevation:"2",medium:""},on:{click:function(e){e.stopPropagation(),t.showCalendar=!0}}},[t._v("行程起始日期"),i("v-icon",{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-calendar")])],1),i("v-dialog",{attrs:{width:"300"},model:{value:t.showCalendar,callback:function(e){t.showCalendar=e},expression:"showCalendar"}},[i("v-date-picker",{attrs:{"show-current":""},on:{change:t.updateStartDate},model:{value:t.firstDatePicker,callback:function(e){t.firstDatePicker=e},expression:"firstDatePicker"}})],1)],1),i("v-btn",{staticClass:"ml-8",attrs:{text:"",elevation:"2",medium:""},on:{click:function(e){t.showEditImage=!0}}},[t._v("編輯照片"),i("v-icon",{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-cloud-upload-outline")])],1),i("v-dialog",{attrs:{width:"800"},model:{value:t.showEditImage,callback:function(e){t.showEditImage=e},expression:"showEditImage"}},[i("pictures-wall",{on:{closeEditImage:t.closeEditImage,syncImageFiles:t.syncImageFiles}})],1),i("v-btn",{staticClass:"ml-6",attrs:{text:"",elevation:"2",medium:""},on:{click:function(e){t.showPrivacySetting=!0}}},[t._v("隱私設定"),i("v-icon",{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-security")])],1),i("v-dialog",{attrs:{width:"600"},model:{value:t.showPrivacySetting,callback:function(e){t.showPrivacySetting=e},expression:"showPrivacySetting"}},[i("v-card",[i("div",{staticClass:"container"},[i("div",{staticClass:"d-flex flex-row flex-wrap justify-center align-center"},[i("span",{staticStyle:{"font-size":"1.2em",color:"#616161"}},[t._v("是否讓其他人能夠瀏覽、參考您的行程")]),i("v-switch",{staticClass:"ml-10 mt-5",attrs:{label:""+t.privacySetting},on:{change:t.updatePrivacy},model:{value:t.trip.isPrivate,callback:function(e){t.$set(t.trip,"isPrivate",e)},expression:"trip.isPrivate"}})],1)])])],1),i("v-btn",{staticClass:"ml-6",attrs:{text:"",elevation:"2",medium:""},on:{click:function(e){t.showDeleteConfirmation=!0}}},[t._v("刪除行程"),i("v-icon",{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1),i("v-dialog",{attrs:{width:"430"},model:{value:t.showDeleteConfirmation,callback:function(e){t.showDeleteConfirmation=e},expression:"showDeleteConfirmation"}},[i("v-card",[i("div",{staticClass:"container py-11"},[i("div",{staticClass:"timePickersGroup d-flex flex-row flex-nowrap justify-center align-center"},[i("span",{staticStyle:{"font-size":"1.4em",color:"#616161"}},[t._v("確定要刪除此行程："+t._s(t.trip.name)+" ？")])])]),i("v-card-actions",[i("div",{staticClass:"flex-grow-1"}),i("div",{staticClass:"btnGroup mb-3"},[i("v-btn",{attrs:{color:"info"},on:{click:function(e){return t.deleteCurrentTrip(t.trip._id)}}},[t._v("確定")]),i("v-btn",{staticClass:"mx-5",attrs:{color:"error"},on:{click:function(e){t.showDeleteConfirmation=!1}}},[t._v("取消")])],1)])],1)],1)],1):t._e()])],1)},E=[],$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"pictures-wall"},[i("v-card-title",{staticClass:"justify-center"},[t._v("分享您這次旅程的照片")]),i("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.confirmImages(e)}}},[i("div",{staticClass:"container d-flex flex-wrap justify-start align-content-space-around"},[t._l(t.uploadWallImages,function(e,s){return i("v-card",{key:"image-card-"+e,staticClass:"picture-card",attrs:{width:"160",height:"160",elevation:"3",hover:""}},[i("v-icon",{attrs:{medium:""},on:{click:function(i){return t.deleteImage(e)}}},[t._v("mdi-close-circle")]),i("v-img",{staticClass:"image",attrs:{height:"140",src:""+e}})],1)}),i("v-card",{staticClass:"picture-card",attrs:{width:"160",height:"160",elevation:"3",hover:""}},[i("v-btn",{attrs:{text:"",height:"100%",width:"100%"},on:{click:function(e){return t.$refs.file.click()}}},[i("input",{ref:"file",staticStyle:{display:"none"},attrs:{accept:".png,.jpg",type:"file",multiple:""},on:{change:t.editImages}}),i("p",[t._v("upload")]),i("v-icon",[t._v("mdi-plus")])],1)],1)],2),i("v-card-actions",[i("div",{staticClass:"flex-grow-1"}),i("div",{staticClass:"btnGroup mb-3 mr-3"},[i("v-btn",{attrs:{color:"info",type:"submit"}},[t._v("完成")])],1)])],1)],1)},S=[],I={name:"PicturesWall",data(){return{deletedImages:[],uploadWallImages:[],newImageFiles:[]}},mounted(){this.uploadWallImages=[...this.trip.images]},computed:{...Object(h["e"])("trip",{trip:t=>t.trip}),originImages(){return this.trip.images}},methods:{...Object(h["d"])("trip",["CHANGE_IMAGES_OF_OVERVIEW"]),...Object(h["d"])("notification",["SET_SUCCESS_MSG","SET_ERROR_MSG"]),editImages(t){for(let e=0;e<t.target.files.length;e++){let i=t.target.files[e];this.newImageFiles.push(i),this.uploadWallImages.push(URL.createObjectURL(i))}t.target.value=""},confirmImages(){this.$emit("closeEditImage",!1),this.deletedImages=this.originImages.filter(t=>{if(!0===t.includes("imgur"))return!this.uploadWallImages.includes(t)}),this.$emit("syncImageFiles",{newImageFiles:this.newImageFiles,deletedImages:this.deletedImages}),this.CHANGE_IMAGES_OF_OVERVIEW(this.uploadWallImages)},cancelEditImage(){this.$emit("closeEditImage",!1),this.uploadWallImages=this.trip.images},deleteImage(t){if(!1===t.includes("imgur")){console.log(`${t} is not uploaded yet`);let e=this.uploadWallImages.length-1-this.uploadWallImages.indexOf(t);this.newImageFiles.splice(e,1)}this.uploadWallImages=this.uploadWallImages.filter(e=>{return e!==t})}}},x=I,O=(i("df20"),i("4bd4")),A=i("adda"),P=Object(u["a"])(x,$,S,!1,null,"7a515a11",null),M=P.exports;p()(P,{VBtn:v["a"],VCard:g["a"],VCardActions:y["a"],VCardTitle:y["c"],VForm:O["a"],VIcon:b["a"],VImg:A["a"]});var B={name:"EditButtonsGroup",props:{},components:{PicturesWall:M},data(){return{showCalendar:!1,firstDatePicker:null,showEditImage:!1,showDeleteConfirmation:!1,showPrivacySetting:!1,newImageFiles:[],deletedImages:[]}},computed:{...Object(h["e"])("trip",{trip:t=>t.trip,isOnEditMode:t=>t.isOnEditMode,startDate:t=>t.startDate?t.startDate:Date.now()}),...Object(h["e"])("account",{account:t=>t}),privacySetting(){return this.trip.isPrivate?"否":"是"}},methods:{...Object(h["b"])("trip",["forkTrip","updateTrip","deleteTrip"]),...Object(h["d"])("trip",["TOGGLE_isOnEditMode","UPDATE_TRIP_startDate","UPDATE_TRIP_privacy","ADD_TRIP_date"]),...Object(h["d"])("notification",["SET_SUCCESS_MSG","SET_ERROR_MSG"]),fork(){"false"===this.account.isLogin?this.SET_ERROR_MSG("請先登入或註冊帳號喔"):this.forkTrip(this.trip._id)},toggleEditMode(){this.TOGGLE_isOnEditMode()},updateStartDate(){this.showCalendar=!1,this.UPDATE_TRIP_startDate(this.firstDatePicker)},updatePrivacy(t){this.UPDATE_TRIP_privacy(t)},closeEditImage(t){this.showEditImage=t},syncImageFiles(t){this.newImageFiles=t.newImageFiles,this.deletedImages=t.deletedImages},deleteCurrentTrip(t){this.SET_SUCCESS_MSG(`已刪除您的行程 "${this.trip.name}"`),this.deleteTrip(t),this.TOGGLE_isOnEditMode(),this.$router.push("/")},editComplete(){const t=new FormData;this.newImageFiles.forEach(e=>{t.append("images",e)}),this.trip["deletedImages"]=this.deletedImages,t.append("data",JSON.stringify(this.trip));const e=this.trip._id;this.updateTrip({tripId:e,formData:t}),this.TOGGLE_isOnEditMode(),this.SET_SUCCESS_MSG("修改完成")}},watch:{isOnEditMode(t){!1===t&&(this.showCalendar=!1,this.showEditImage=!1,this.showDeleteConfirmation=!1,this.showPrivacySetting=!1)}}},F=B,V=(i("43ed"),i("d951"),i("9d26")),Y=i("a9ad"),j=i("58df"),W=i("80d2"),L=Object(j["a"])(Y["a"]).extend({methods:{genPickerButton(t,e,i,s=!1,a=""){const n=this[t]===e,r=i=>{i.stopPropagation(),this.$emit(`update:${Object(W["v"])(t)}`,e)};return this.$createElement("div",{staticClass:`v-picker__title__btn ${a}`.trim(),class:{"v-picker__title__btn--active":n,"v-picker__title__btn--readonly":s},on:n||s?void 0:{click:r}},Array.isArray(i)?i:[i])}}}),R=Object(j["a"])(L).extend({name:"v-date-picker-title",props:{date:{type:String,default:""},disabled:Boolean,readonly:Boolean,selectingYear:Boolean,value:{type:String},year:{type:[Number,String],default:""},yearIcon:{type:String}},data:()=>({isReversing:!1}),computed:{computedTransition(){return this.isReversing?"picker-reverse-transition":"picker-transition"}},watch:{value(t,e){this.isReversing=t<e}},methods:{genYearIcon(){return this.$createElement(V["a"],{props:{dark:!0}},this.yearIcon)},getYearBtn(){return this.genPickerButton("selectingYear",!0,[String(this.year),this.yearIcon?this.genYearIcon():null],!1,"v-date-picker-title__year")},genTitleText(){return this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("div",{domProps:{innerHTML:this.date||"&nbsp;"},key:this.value})])},genTitleDate(){return this.genPickerButton("selectingYear",!1,[this.genTitleText()],!1,"v-date-picker-title__date")}},render(t){return t("div",{staticClass:"v-date-picker-title",class:{"v-date-picker-title--disabled":this.disabled}},[this.getYearBtn(),this.genTitleDate()])}}),N=(i("2102"),i("afdd")),U=i("2b0e"),G=U["a"].extend({name:"localable",props:{locale:String},computed:{currentLocale(){return this.locale||this.$vuetify.lang.current}}}),z=i("7560");const H=(t,e,i)=>{return e>>=0,t=String(t),i=String(i),t.length>e?String(t):(e-=t.length,e>i.length&&(i+=i.repeat(e/i.length)),i.slice(0,e)+String(t))};var Z=(t,e=2)=>H(t,e,"0");function q(t,e,i={start:0,length:0}){const s=t=>{const[e,i,s]=t.trim().split(" ")[0].split("-");return[Z(e,4),Z(i||1),Z(s||1)].join("-")};try{const n=new Intl.DateTimeFormat(t||void 0,e);return t=>n.format(new Date(`${s(t)}T00:00:00+00:00`))}catch(a){return i.start||i.length?t=>s(t).substr(i.start||0,i.length):void 0}}var K=q,J=(t,e)=>{const[i,s]=t.split("-").map(Number);return s+e===0?`${i-1}-12`:s+e===13?`${i+1}-01`:`${i}-${Z(s+e)}`},X=Object(j["a"])(Y["a"],G,z["a"]).extend({name:"v-date-picker-header",props:{disabled:Boolean,format:Function,min:String,max:String,nextIcon:{type:String,default:"$vuetify.icons.next"},prevIcon:{type:String,default:"$vuetify.icons.prev"},readonly:Boolean,value:{type:[Number,String],required:!0}},data(){return{isReversing:!1}},computed:{formatter(){return this.format?this.format:String(this.value).split("-")[1]?K(this.currentLocale,{month:"long",year:"numeric",timeZone:"UTC"},{length:7}):K(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},watch:{value(t,e){this.isReversing=t<e}},methods:{genBtn(t){const e=this.disabled||t<0&&this.min&&this.calculateChange(t)<this.min||t>0&&this.max&&this.calculateChange(t)>this.max;return this.$createElement(N["a"],{props:{dark:this.dark,disabled:e,icon:!0,light:this.light},nativeOn:{click:e=>{e.stopPropagation(),this.$emit("input",this.calculateChange(t))}}},[this.$createElement(V["a"],t<0===!this.$vuetify.rtl?this.prevIcon:this.nextIcon)])},calculateChange(t){const[e,i]=String(this.value).split("-").map(Number);return null==i?`${e+t}`:J(String(this.value),t)},genHeader(){const t=!this.disabled&&(this.color||"accent"),e=this.$createElement("div",this.setTextColor(t,{key:String(this.value)}),[this.$createElement("button",{attrs:{type:"button"},on:{click:()=>this.$emit("toggle")}},[this.$slots.default||this.formatter(String(this.value))])]),i=this.$createElement("transition",{props:{name:this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"}},[e]);return this.$createElement("div",{staticClass:"v-date-picker-header__value",class:{"v-date-picker-header__value--disabled":this.disabled}},[i])}},render(){return this.$createElement("div",{staticClass:"v-date-picker-header",class:{"v-date-picker-header--disabled":this.disabled,...this.themeClasses}},[this.genBtn(-1),this.genHeader(),this.genBtn(1)])}}),Q=(i("c982"),i("c3f0"));function tt(t,e,i,s){return(!s||s(t))&&(!e||t>=e)&&(!i||t<=i)}var et=Object(j["a"])(Y["a"],G,z["a"]).extend({directives:{Touch:Q["a"]},props:{allowedDates:Function,current:String,disabled:Boolean,format:Function,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},min:String,max:String,readonly:Boolean,scrollable:Boolean,tableDate:{type:String,required:!0},value:[String,Array]},data:()=>({isReversing:!1}),computed:{computedTransition(){return this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"},displayedMonth(){return Number(this.tableDate.split("-")[1])-1},displayedYear(){return Number(this.tableDate.split("-")[0])}},watch:{tableDate(t,e){this.isReversing=t<e}},methods:{genButtonClasses(t,e,i,s){return{"v-size--default":!e,"v-btn--active":i,"v-btn--flat":!t||this.disabled,"v-btn--text":i===s,"v-btn--rounded":e,"v-btn--disabled":!t||this.disabled,"v-btn--outlined":s&&!i,...this.themeClasses}},genButtonEvents(t,e,i){if(!this.disabled)return{click:()=>{e&&!this.readonly&&this.$emit("input",t),this.$emit(`click:${i}`,t)},dblclick:()=>this.$emit(`dblclick:${i}`,t)}},genButton(t,e,i,s){const a=tt(t,this.min,this.max,this.allowedDates),n=t===this.value||Array.isArray(this.value)&&-1!==this.value.indexOf(t),r=t===this.current,l=n?this.setBackgroundColor:this.setTextColor,o=(n||r)&&(this.color||"accent");return this.$createElement("button",l(o,{staticClass:"v-btn",class:this.genButtonClasses(a,e,n,r),attrs:{type:"button"},domProps:{disabled:this.disabled||!a},on:this.genButtonEvents(t,a,i)}),[this.$createElement("div",{staticClass:"v-btn__content"},[s(t)]),this.genEvents(t)])},getEventColors(t){const e=t=>Array.isArray(t)?t:[t];let i,s=[];return i=Array.isArray(this.events)?this.events.includes(t):this.events instanceof Function?this.events(t)||!1:this.events&&this.events[t]||!1,i?(s=!0!==i?e(i):"string"===typeof this.eventColor?[this.eventColor]:"function"===typeof this.eventColor?e(this.eventColor(t)):Array.isArray(this.eventColor)?this.eventColor:e(this.eventColor[t]),s.filter(t=>t)):[]},genEvents(t){const e=this.getEventColors(t);return e.length?this.$createElement("div",{staticClass:"v-date-picker-table__events"},e.map(t=>this.$createElement("div",this.setBackgroundColor(t)))):null},wheel(t,e){t.preventDefault(),this.$emit("update:table-date",e(t.deltaY))},touch(t,e){this.$emit("update:table-date",e(t))},genTable(t,e,i){const s=this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("table",{key:this.tableDate},e)]),a={name:"touch",value:{left:t=>t.offsetX<-15&&this.touch(1,i),right:t=>t.offsetX>15&&this.touch(-1,i)}};return this.$createElement("div",{staticClass:t,class:{"v-date-picker-table--disabled":this.disabled,...this.themeClasses},on:!this.disabled&&this.scrollable?{wheel:t=>this.wheel(t,i)}:void 0,directives:[a]},[s])}}}),it=Object(j["a"])(et).extend({name:"v-date-picker-date-table",props:{firstDayOfWeek:{type:[String,Number],default:0},showWeek:Boolean,weekdayFormat:Function},computed:{formatter(){return this.format||K(this.currentLocale,{day:"numeric",timeZone:"UTC"},{start:8,length:2})},weekdayFormatter(){return this.weekdayFormat||K(this.currentLocale,{weekday:"narrow",timeZone:"UTC"})},weekDays(){const t=parseInt(this.firstDayOfWeek,10);return this.weekdayFormatter?Object(W["h"])(7).map(e=>this.weekdayFormatter(`2017-01-${t+e+15}`)):Object(W["h"])(7).map(e=>["S","M","T","W","T","F","S"][(e+t)%7])}},methods:{calculateTableDate(t){return J(this.tableDate,Math.sign(t||1))},genTHead(){const t=this.weekDays.map(t=>this.$createElement("th",t));return this.showWeek&&t.unshift(this.$createElement("th")),this.$createElement("thead",this.genTR(t))},weekDaysBeforeFirstDayOfTheMonth(){const t=new Date(`${this.displayedYear}-${Z(this.displayedMonth+1)}-01T00:00:00+00:00`),e=t.getUTCDay();return(e-parseInt(this.firstDayOfWeek)+7)%7},getWeekNumber(){let t=[0,31,59,90,120,151,181,212,243,273,304,334][this.displayedMonth];this.displayedMonth>1&&(this.displayedYear%4===0&&this.displayedYear%100!==0||this.displayedYear%400===0)&&t++;const e=(this.displayedYear+(this.displayedYear-1>>2)-Math.floor((this.displayedYear-1)/100)+Math.floor((this.displayedYear-1)/400)-Number(this.firstDayOfWeek))%7;return Math.floor((t+e)/7)+1},genWeekNumber(t){return this.$createElement("td",[this.$createElement("small",{staticClass:"v-date-picker-table--date__week"},String(t).padStart(2,"0"))])},genTBody(){const t=[],e=new Date(this.displayedYear,this.displayedMonth+1,0).getDate();let i=[],s=this.weekDaysBeforeFirstDayOfTheMonth(),a=this.getWeekNumber();this.showWeek&&i.push(this.genWeekNumber(a++));while(s--)i.push(this.$createElement("td"));for(s=1;s<=e;s++){const n=`${this.displayedYear}-${Z(this.displayedMonth+1)}-${Z(s)}`;i.push(this.$createElement("td",[this.genButton(n,!0,"date",this.formatter)])),i.length%(this.showWeek?8:7)===0&&(t.push(this.genTR(i)),i=[],s<e&&this.showWeek&&i.push(this.genWeekNumber(a++)))}return i.length&&t.push(this.genTR(i)),this.$createElement("tbody",t)},genTR(t){return[this.$createElement("tr",t)]}},render(){return this.genTable("v-date-picker-table v-date-picker-table--date",[this.genTHead(),this.genTBody()],this.calculateTableDate)}}),st=Object(j["a"])(et).extend({name:"v-date-picker-month-table",computed:{formatter(){return this.format||K(this.currentLocale,{month:"short",timeZone:"UTC"},{start:5,length:2})}},methods:{calculateTableDate(t){return`${parseInt(this.tableDate,10)+Math.sign(t||1)}`},genTBody(){const t=[],e=Array(3).fill(null),i=12/e.length;for(let s=0;s<i;s++){const i=e.map((t,i)=>{const a=s*e.length+i,n=`${this.displayedYear}-${Z(a+1)}`;return this.$createElement("td",{key:a},[this.genButton(n,!1,"month",this.formatter)])});t.push(this.$createElement("tr",{key:s},i))}return this.$createElement("tbody",t)}},render(){return this.genTable("v-date-picker-table v-date-picker-table--month",[this.genTBody()],this.calculateTableDate)}}),at=(i("02f0"),Object(j["a"])(Y["a"],G).extend({name:"v-date-picker-years",props:{format:Function,min:[Number,String],max:[Number,String],readonly:Boolean,value:[Number,String]},data(){return{defaultColor:"primary"}},computed:{formatter(){return this.format||K(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},mounted(){setTimeout(()=>{const t=this.$el.getElementsByClassName("active")[0];this.$el.scrollTop=t?t.offsetTop-this.$el.offsetHeight/2+t.offsetHeight/2:this.$el.scrollHeight/2-this.$el.offsetHeight/2})},methods:{genYearItem(t){const e=this.formatter(`${t}`),i=parseInt(this.value,10)===t,s=i&&(this.color||"primary");return this.$createElement("li",this.setTextColor(s,{key:t,class:{active:i},on:{click:()=>this.$emit("input",t)}}),e)},genYearItems(){const t=[],e=this.value?parseInt(this.value,10):(new Date).getFullYear(),i=this.max?parseInt(this.max,10):e+100,s=Math.min(i,this.min?parseInt(this.min,10):e-100);for(let a=i;a>=s;a--)t.push(this.genYearItem(a));return t}},render(){return this.$createElement("ul",{staticClass:"v-date-picker-years",ref:"years"},this.genYearItems())}})),nt=(i("e53c"),i("615b"),Object(j["a"])(Y["a"],z["a"]).extend({name:"v-picker",props:{fullWidth:Boolean,landscape:Boolean,noTitle:Boolean,transition:{type:String,default:"fade-transition"},width:{type:[Number,String],default:290}},computed:{computedTitleColor(){const t=!this.isDark&&(this.color||"primary");return this.color||t}},methods:{genTitle(){return this.$createElement("div",this.setBackgroundColor(this.computedTitleColor,{staticClass:"v-picker__title",class:{"v-picker__title--landscape":this.landscape}}),this.$slots.title)},genBodyTransition(){return this.$createElement("transition",{props:{name:this.transition}},this.$slots.default)},genBody(){return this.$createElement("div",{staticClass:"v-picker__body",class:{"v-picker__body--no-title":this.noTitle,...this.themeClasses},style:this.fullWidth?void 0:{width:Object(W["f"])(this.width)}},[this.genBodyTransition()])},genActions(){return this.$createElement("div",{staticClass:"v-picker__actions v-card__actions",class:{"v-picker__actions--no-title":this.noTitle}},this.$slots.actions)}},render(t){return t("div",{staticClass:"v-picker v-card",class:{"v-picker--landscape":this.landscape,"v-picker--full-width":this.fullWidth,...this.themeClasses}},[this.$slots.title?this.genTitle():null,this.genBody(),this.$slots.actions?this.genActions():null])}})),rt=nt,lt=Object(j["a"])(Y["a"],z["a"]).extend({name:"picker",props:{fullWidth:Boolean,headerColor:String,landscape:Boolean,noTitle:Boolean,width:{type:[Number,String],default:290}},methods:{genPickerTitle(){return null},genPickerBody(){return null},genPickerActionsSlot(){return this.$scopedSlots.default?this.$scopedSlots.default({save:this.save,cancel:this.cancel}):this.$slots.default},genPicker(t){const e=[];if(!this.noTitle){const t=this.genPickerTitle();t&&e.push(t)}const i=this.genPickerBody();return i&&e.push(i),e.push(this.$createElement("template",{slot:"actions"},[this.genPickerActionsSlot()])),this.$createElement(rt,{staticClass:t,props:{color:this.headerColor||this.color,dark:this.dark,fullWidth:this.fullWidth,landscape:this.landscape,light:this.light,width:this.width,noTitle:this.noTitle}},e)}}}),ot=i("d9bd");const ht=[0,31,28,31,30,31,30,31,31,30,31,30,31],ct=[0,31,29,31,30,31,30,31,31,30,31,30,31];function dt(t){return t%4===0&&t%100!==0||t%400===0}function ut(t,e){return dt(t)?ct[e]:ht[e]}function mt(t,e){const[i,s=1,a=1]=t.split("-");return`${i}-${Z(s)}-${Z(a)}`.substr(0,{date:10,month:7,year:4}[e])}var pt=Object(j["a"])(G,lt).extend({name:"v-date-picker",props:{allowedDates:Function,dayFormat:Function,disabled:Boolean,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},firstDayOfWeek:{type:[String,Number],default:0},headerDateFormat:Function,max:String,min:String,monthFormat:Function,multiple:Boolean,nextIcon:{type:String,default:"$vuetify.icons.next"},pickerDate:String,prevIcon:{type:String,default:"$vuetify.icons.prev"},reactive:Boolean,readonly:Boolean,scrollable:Boolean,showCurrent:{type:[Boolean,String],default:!0},selectedItemsText:{type:String,default:"$vuetify.datePicker.itemsSelected"},showWeek:Boolean,titleDateFormat:Function,type:{type:String,default:"date",validator:t=>["date","month"].includes(t)},value:[Array,String],weekdayFormat:Function,yearFormat:Function,yearIcon:String},data(){const t=new Date;return{activePicker:this.type.toUpperCase(),inputDay:null,inputMonth:null,inputYear:null,isReversing:!1,now:t,tableDate:(()=>{if(this.pickerDate)return this.pickerDate;const e=(this.multiple?this.value[this.value.length-1]:this.value)||`${t.getFullYear()}-${t.getMonth()+1}`;return mt(e,"date"===this.type?"month":"year")})()}},computed:{lastValue(){return this.multiple?this.value[this.value.length-1]:this.value},selectedMonths(){return this.value&&this.value.length&&"month"!==this.type?this.multiple?this.value.map(t=>t.substr(0,7)):this.value.substr(0,7):this.value},current(){return!0===this.showCurrent?mt(`${this.now.getFullYear()}-${this.now.getMonth()+1}-${this.now.getDate()}`,this.type):this.showCurrent||null},inputDate(){return"date"===this.type?`${this.inputYear}-${Z(this.inputMonth+1)}-${Z(this.inputDay)}`:`${this.inputYear}-${Z(this.inputMonth+1)}`},tableMonth(){return Number((this.pickerDate||this.tableDate).split("-")[1])-1},tableYear(){return Number((this.pickerDate||this.tableDate).split("-")[0])},minMonth(){return this.min?mt(this.min,"month"):null},maxMonth(){return this.max?mt(this.max,"month"):null},minYear(){return this.min?mt(this.min,"year"):null},maxYear(){return this.max?mt(this.max,"year"):null},formatters(){return{year:this.yearFormat||K(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4}),titleDate:this.titleDateFormat||(this.multiple?this.defaultTitleMultipleDateFormatter:this.defaultTitleDateFormatter)}},defaultTitleMultipleDateFormatter(){return t=>{return t.length?1===t.length?this.defaultTitleDateFormatter(t[0]):this.$vuetify.lang.t(this.selectedItemsText,[t.length]):"-"}},defaultTitleDateFormatter(){const t={year:{year:"numeric",timeZone:"UTC"},month:{month:"long",timeZone:"UTC"},date:{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"}},e=K(this.currentLocale,t[this.type],{start:0,length:{date:10,month:7,year:4}[this.type]}),i=t=>e(t).replace(/([^\d\s])([\d])/g,(t,e,i)=>`${e} ${i}`).replace(", ",",<br>");return this.landscape?i:e}},watch:{tableDate(t,e){const i="month"===this.type?"year":"month";this.isReversing=mt(t,i)<mt(e,i),this.$emit("update:picker-date",t)},pickerDate(t){t?this.tableDate=t:this.lastValue&&"date"===this.type?this.tableDate=mt(this.lastValue,"month"):this.lastValue&&"month"===this.type&&(this.tableDate=mt(this.lastValue,"year"))},value(t,e){this.checkMultipleProp(),this.setInputDate(),this.multiple||!this.value||this.pickerDate?this.multiple&&this.value.length&&!e.length&&!this.pickerDate&&(this.tableDate=mt(this.inputDate,"month"===this.type?"year":"month")):this.tableDate=mt(this.inputDate,"month"===this.type?"year":"month")},type(t){if(this.activePicker=t.toUpperCase(),this.value&&this.value.length){const e=(this.multiple?this.value:[this.value]).map(e=>mt(e,t)).filter(this.isDateAllowed);this.$emit("input",this.multiple?e:e[0])}}},created(){this.checkMultipleProp(),this.pickerDate!==this.tableDate&&this.$emit("update:picker-date",this.tableDate),this.setInputDate()},methods:{emitInput(t){const e=this.multiple?-1===this.value.indexOf(t)?this.value.concat([t]):this.value.filter(e=>e!==t):t;this.$emit("input",e),this.multiple||this.$emit("change",t)},checkMultipleProp(){if(null==this.value)return;const t=this.value.constructor.name,e=this.multiple?"Array":"String";t!==e&&Object(ot["c"])(`Value must be ${this.multiple?"an":"a"} ${e}, got ${t}`,this)},isDateAllowed(t){return tt(t,this.min,this.max,this.allowedDates)},yearClick(t){this.inputYear=t,"month"===this.type?this.tableDate=`${t}`:this.tableDate=`${t}-${Z((this.tableMonth||0)+1)}`,this.activePicker="MONTH",this.reactive&&!this.readonly&&!this.multiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)},monthClick(t){this.inputYear=parseInt(t.split("-")[0],10),this.inputMonth=parseInt(t.split("-")[1],10)-1,"date"===this.type?(this.inputDay&&(this.inputDay=Math.min(this.inputDay,ut(this.inputYear,this.inputMonth+1))),this.tableDate=t,this.activePicker="DATE",this.reactive&&!this.readonly&&!this.multiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)):this.emitInput(this.inputDate)},dateClick(t){this.inputYear=parseInt(t.split("-")[0],10),this.inputMonth=parseInt(t.split("-")[1],10)-1,this.inputDay=parseInt(t.split("-")[2],10),this.emitInput(this.inputDate)},genPickerTitle(){return this.$createElement(R,{props:{date:this.value?this.formatters.titleDate(this.value):"",disabled:this.disabled,readonly:this.readonly,selectingYear:"YEAR"===this.activePicker,year:this.formatters.year(this.value?`${this.inputYear}`:this.tableDate),yearIcon:this.yearIcon,value:this.multiple?this.value[0]:this.value},slot:"title",on:{"update:selecting-year":t=>this.activePicker=t?"YEAR":this.type.toUpperCase()}})},genTableHeader(){return this.$createElement(X,{props:{nextIcon:this.nextIcon,color:this.color,dark:this.dark,disabled:this.disabled,format:this.headerDateFormat,light:this.light,locale:this.locale,min:"DATE"===this.activePicker?this.minMonth:this.minYear,max:"DATE"===this.activePicker?this.maxMonth:this.maxYear,prevIcon:this.prevIcon,readonly:this.readonly,value:"DATE"===this.activePicker?`${Z(this.tableYear,4)}-${Z(this.tableMonth+1)}`:`${Z(this.tableYear,4)}`},on:{toggle:()=>this.activePicker="DATE"===this.activePicker?"MONTH":"YEAR",input:t=>this.tableDate=t}})},genDateTable(){return this.$createElement(it,{props:{allowedDates:this.allowedDates,color:this.color,current:this.current,dark:this.dark,disabled:this.disabled,events:this.events,eventColor:this.eventColor,firstDayOfWeek:this.firstDayOfWeek,format:this.dayFormat,light:this.light,locale:this.locale,min:this.min,max:this.max,readonly:this.readonly,scrollable:this.scrollable,showWeek:this.showWeek,tableDate:`${Z(this.tableYear,4)}-${Z(this.tableMonth+1)}`,value:this.value,weekdayFormat:this.weekdayFormat},ref:"table",on:{input:this.dateClick,"update:table-date":t=>this.tableDate=t,"click:date":t=>this.$emit("click:date",t),"dblclick:date":t=>this.$emit("dblclick:date",t)}})},genMonthTable(){return this.$createElement(st,{props:{allowedDates:"month"===this.type?this.allowedDates:null,color:this.color,current:this.current?mt(this.current,"month"):null,dark:this.dark,disabled:this.disabled,events:"month"===this.type?this.events:null,eventColor:"month"===this.type?this.eventColor:null,format:this.monthFormat,light:this.light,locale:this.locale,min:this.minMonth,max:this.maxMonth,readonly:this.readonly&&"month"===this.type,scrollable:this.scrollable,value:this.selectedMonths,tableDate:`${Z(this.tableYear,4)}`},ref:"table",on:{input:this.monthClick,"update:table-date":t=>this.tableDate=t,"click:month":t=>this.$emit("click:month",t),"dblclick:month":t=>this.$emit("dblclick:month",t)}})},genYears(){return this.$createElement(at,{props:{color:this.color,format:this.yearFormat,locale:this.locale,min:this.minYear,max:this.maxYear,value:this.tableYear},on:{input:this.yearClick}})},genPickerBody(){const t="YEAR"===this.activePicker?[this.genYears()]:[this.genTableHeader(),"DATE"===this.activePicker?this.genDateTable():this.genMonthTable()];return this.$createElement("div",{key:this.activePicker},t)},setInputDate(){if(this.lastValue){const t=this.lastValue.split("-");this.inputYear=parseInt(t[0],10),this.inputMonth=parseInt(t[1],10)-1,"date"===this.type&&(this.inputDay=parseInt(t[2],10))}else this.inputYear=this.inputYear||this.now.getFullYear(),this.inputMonth=null==this.inputMonth?this.inputMonth:this.now.getMonth(),this.inputDay=this.inputDay||this.now.getDate()}},render(){return this.genPicker("v-picker--date")}}),vt=(i("ec29"),i("9d01"),i("c37a")),gt=i("5311"),yt=i("8547"),ft=Object(j["a"])(vt["a"],gt["a"],yt["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"accent"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some(e=>this.valueComparator(e,t)):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=vt["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:t=>{t.preventDefault(),this.onChange()}},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown},ref:"input"})},onBlur(){this.isFocused=!1},onChange(){if(this.isDisabled)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const i=e.length;e=e.filter(e=>!this.valueComparator(e,t)),e.length===i&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(){this.isFocused=!0},onKeydown(t){}}}),bt=i("0789"),wt=i("490a"),kt=ft.extend({name:"v-switch",directives:{Touch:Q["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...vt["a"].options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.disabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.$attrs,...this.attrs}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(bt["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(wt["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===W["w"].left&&this.isActive||t.keyCode===W["w"].right&&!this.isActive)&&this.onChange()}}}),Ct=Object(u["a"])(F,D,E,!1,null,"37476713",null),Tt=Ct.exports;p()(Ct,{VBtn:v["a"],VCard:g["a"],VCardActions:y["a"],VDatePicker:pt,VDialog:f["a"],VIcon:b["a"],VSwitch:kt});var _t={name:"trip",components:{Overview:n["a"],TripSchedule:_,EditButtonsGroup:Tt},data(){return{isShowOverview:!0,dayOfTrip:0,map:null,markers:[],infoWindow:""}},mounted(){this.initMap()},computed:{...Object(h["e"])("trip",{trip:t=>t.trip,isOnEditMode:t=>t.isOnEditMode}),...Object(h["e"])("account",{account:t=>t}),datesOfTrip(){const t=this.trip.startDate?this.trip.startDate:new Date;return this.trip.contents.map((e,i)=>{let s=new Date(t);return s.setDate(s.getDate()+i),s})}},methods:{...Object(h["d"])("trip",["ADD_TRIP_date"]),...Object(h["d"])("notification",["SET_SUCCESS_MSG","SET_ERROR_MSG"]),initMap(){this.infoWindow=new google.maps.InfoWindow,this.map=new google.maps.Map(document.getElementById("map"),{center:this.center(),zoom:12,mapTypeControl:!1,fullscreenControl:!0,fullscreenControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM}}),this.markAllSite()},markAllSite(){this.infoWindow.close(),this.markers=this.trip.contents.map(t=>t.activities).flat().map(t=>{const e=new google.maps.Marker({map:this.map,position:t.geometry,title:"t"});return e.site=t,e.addListener("mouseover",()=>{this.infoWindow.setContent(this.generateInfo(t)),this.infoWindow.open(this.map,e)}),e.addListener("mouseout",()=>{this.infoWindow.close()}),e})},showMarkerAnimation(t,e){this.map.setCenter(t);const i=this.markers.find(t=>t.site.placeId===e);i.setAnimation(google.maps.Animation.BOUNCE)},clearMarkerAnimation(t,e){const i=this.markers.find(t=>t.site.placeId===e);i.setAnimation(null)},toggleContent(t){this.isShowOverview=!1,this.dayOfTrip=t},generateInfo(t){const e=document.createElement("div"),i=document.createElement("h4");i.textContent=t.name,e.appendChild(i),e.appendChild(document.createElement("br"));const s=document.createElement("p");return s.textContent=t.formatted_address,e.appendChild(s),e},center(){const t=[],e=[];return this.trip.contents.map(t=>t.activities).flat().forEach(i=>{t.push(i.geometry.lat),e.push(i.geometry.lng)}),t.sort((t,e)=>t-e),e.sort((t,e)=>t-e),{lat:(t[0]+t[t.length-1])/2,lng:(e[0]+e[e.length-1])/2}}},watch:{async $route(t,e){this.$router.go(0)},isShowOverview(t){t&&this.initMap()}}},Dt=_t,Et=(i("c90e"),i("8860")),$t=i("da13"),St=i("5d23"),It=i("1baa"),xt=Object(u["a"])(Dt,s,a,!1,null,"578b6280",null);e["default"]=xt.exports;p()(xt,{VIcon:b["a"],VList:Et["a"],VListItem:$t["a"],VListItemContent:St["a"],VListItemGroup:It["a"],VListItemTitle:St["b"]})},"43ed":function(t,e,i){"use strict";var s=i("0e55"),a=i.n(s);a.a},4981:function(t,e,i){"use strict";var s=i("5d46"),a=i.n(s);a.a},"4bd4":function(t,e,i){"use strict";var s=i("3206");e["a"]=Object(s["b"])("form").extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>{return t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0})},i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",s=>{s&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))}):i.valid=e(t),i},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const i=this.watchers.find(t=>t._uid===e._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.$attrs},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},"52f9":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"little-card-root"},[i("v-carousel",{attrs:{height:"144","hide-delimiter-background":"","hide-delimiters":"","next-icon":1!==t.images.length&&"$vuetify.icons.next","prev-icon":1!==t.images.length&&"$vuetify.icons.prev"}},t._l(t.images,function(t){return i("v-carousel-item",{key:t,attrs:{src:t}})}),1),i("div",{staticClass:"card-content"},[i("rating-favorite",{attrs:{item:t.item,type:t.type}})],1)],1)},a=[],n=i("d22d"),r={components:{RatingFavorite:n["a"]},props:{item:{type:Object,default:()=>({})},type:String},data(){return{images:[]}},created(){"site"===this.type?this.images=this.item.photos:this.images=this.item.images,0===this.images.length&&this.images.push(i("aa53"))}},l=r,o=(i("c7ca"),i("2877")),h=i("6544"),c=i.n(h),d=i("b0af"),u=i("5e66"),m=i("3e35"),p=Object(o["a"])(l,s,a,!1,null,null,null);e["a"]=p.exports;c()(p,{VCard:d["a"],VCarousel:u["a"],VCarouselItem:m["a"]})},"5d46":function(t,e,i){},7994:function(t,e,i){},"9d01":function(t,e,i){},a86d:function(t,e,i){},aa53:function(t,e,i){t.exports=i.p+"img/5.ccc16904.jpg"},c7ca:function(t,e,i){"use strict";var s=i("1e09"),a=i.n(s);a.a},c90e:function(t,e,i){"use strict";var s=i("a86d"),a=i.n(s);a.a},c982:function(t,e,i){},d951:function(t,e,i){},df20:function(t,e,i){"use strict";var s=i("7994"),a=i.n(s);a.a},e53c:function(t,e,i){},ec29:function(t,e,i){}}]);
//# sourceMappingURL=chunk-7f32030c.0122a8ed.js.map