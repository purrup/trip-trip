(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec9cacee"],{"2f5c":function(t,s,e){"use strict";var r=e("8387"),i=e.n(r);i.a},"38a7":function(t,s,e){},"5cd4":function(t,s,e){"use strict";var r=e("38a7"),i=e.n(r);i.a},7119:function(t,s,e){},8387:function(t,s,e){},"85cc":function(t,s,e){"use strict";var r=e("7119"),i=e.n(r);i.a},9534:function(t,s,e){"use strict";e.r(s);var r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"trips-root"}},[e("main",[e("v-row",{attrs:{id:"trips"}},[e("search-result-bar",{attrs:{resultWord:t.resultWord,resultsAmounts:t.trips.length},on:{sortByDays:t.sortByDays,sortBySitesAmounts:t.sortBySitesAmounts,sortByCollectingCounts:t.sortByCollectingCounts}}),e("v-col",{attrs:{cols:"auto"}},t._l(t.trips,function(s){return e("trip-card",{key:"trip-card-"+s._id,attrs:{trip:s},nativeOn:{mouseover:function(e){return t.displayOverview(s)},mouseout:function(s){return t.mouseout(s)}}})}),1)],1),e("v-row",{attrs:{id:"overview"}},[e("v-col",{attrs:{cols:"auto"}},[e("overview",{attrs:{trip:t.currentTrip}})],1)],1)],1)])},i=[],o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-card",{staticClass:"trip-card mb-5",attrs:{width:"530",height:"126","min-width":"530","min-height":"126",tile:"",hover:""}},[e("v-list-item",{staticClass:"pl-0"},[e("v-list-item-avatar",{staticClass:"img ml-2",attrs:{tile:"",size:"110"}},[e("v-img",{attrs:{src:0!==t.trip.images.length?t.trip.images[0]:""}})],1),e("div",{staticClass:"content my-auto"},[e("rating-favorite",{staticClass:"mt-3",attrs:{item:t.trip,type:"trip"}}),e("v-row",{staticClass:"infomation"},[e("v-col",{staticClass:"pt-1",attrs:{cols:"6"}},[e("ul",{staticStyle:{"list-style":"none"}},[e("li",[t._v("作者："+t._s(t.trip.username))]),e("li",[t._v("旅遊天數： "+t._s(t.trip.days))])])]),e("v-col",{staticClass:"pt-1",attrs:{cols:"6"}},[e("ul",{staticStyle:{"list-style":"none"}},[e("li",{staticClass:"city"},[t._v("城市： "+t._s(t.cities))]),e("li",[t._v("預估花費： $"+t._s(t.estimatedCost))])])])],1)],1)],1)],1)},a=[],n=e("d22d"),c={name:"TripCard",components:{RatingFavorite:n["a"]},props:{trip:Object},data(){return{defautlImage:"https://source.unsplash.com/random/110x110",estimatedCost:this.trip.contents.map(t=>t.activities.reduce((t,s)=>t+s.cost,0)).reduce((t,s)=>t+s,0)}},computed:{cities(){return this.trip.cities.join("、")}}},l=c,u=(e("2f5c"),e("2877")),p=e("6544"),m=e.n(p),d=e("b0af"),h=e("62ad"),v=e("adda"),y=e("da13"),f=e("8270"),g=e("0fd9"),C=Object(u["a"])(l,o,a,!1,null,"1ccf4f00",null),w=C.exports;m()(C,{VCard:d["a"],VCol:h["a"],VImg:v["a"],VListItem:y["a"],VListItemAvatar:f["a"],VRow:g["a"]});var _=e("2dc1"),B=e("ac7e"),b=e("2f62"),S={name:"trips",components:{TripCard:w,Overview:_["a"],SearchResultBar:B["a"]},data(){return{currentTrip:{},timeStamp:"",timer:null,resultWord:""}},async beforeRouteUpdate(t,s,e){if(t.query.hasOwnProperty("keyword")){const s=t.query.keyword;this.resultWord=s,await this.$store.dispatch("trip/getTripsByKeyword",s)}else{const s=t.query["cities[]"];this.resultWord=s,await this.$store.dispatch("trip/getTripByCountryAndCities",s),this.currentTrip={}}this.currentTrip=this.trips[0],e()},created(){this.currentTrip=this.trips[0],this.resultWord=this.$route.query["cities[]"]},computed:{...Object(b["e"])("trip",{trips:t=>t.trips})},methods:{displayOverview(t){this.timeStamp=Date.now(),this.timer=setInterval(this.toggle,100,t)},mouseout(){clearInterval(this.timer)},toggle(t){(Date.now()-this.timeStamp)/100<3||(this.currentTrip=t)},sortByDays(){this.trips.sort((t,s)=>s.days-t.days)},sortBySitesAmounts(){this.trips.sort((t,s)=>s.sites.length-t.sites.length)},sortByCollectingCounts(){this.trips.sort((t,s)=>s.collectingCounts-t.collectingCounts)}}},$=S,T=(e("5cd4"),Object(u["a"])($,r,i,!1,null,"1b14d40e",null));s["default"]=T.exports;m()(T,{VCol:h["a"],VRow:g["a"]})},ac7e:function(t,s,e){"use strict";var r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search-result-bar-root"},[0!==t.resultsAmounts?[e("div",[e("p",[t._v(t._s(t.resultWord))]),e("span",[t._v(t._s(t.resultsAmounts)+"則結果")])]),"Sites"===t.$route.name?e("v-select",{style:{width:"110px","flex-grow":"0 !important"},attrs:{label:"排序",solo:"",items:["評分數","評論數","收藏數"],"menu-props":{top:!1,offsetY:!0}},on:{change:t.sortSites}}):"Trips"===t.$route.name?e("v-select",{style:{width:"110px","flex-grow":"0 !important"},attrs:{label:"排序",solo:"",items:["天數","景點數","收藏數"],"menu-props":{top:!1,offsetY:!0}},on:{change:t.sortTrips}}):t._e()]:[e("h4",[t._v('沒有任何有關"'+t._s(t.resultWord)+'"的結果')])]],2)},i=[],o={props:{resultWord:String,resultsAmounts:Number},methods:{sortSites(t){"評分數"===t?this.$emit("sortByRating"):"評論數"===t?this.$emit("sortByCommentAmounts"):this.$emit("sortByCollectingCounts")},sortTrips(t){"天數"===t?this.$emit("sortByDays"):"景點數"===t?this.$emit("sortBySitesAmounts"):this.$emit("sortByCollectingCounts")}}},a=o,n=(e("85cc"),e("2877")),c=e("6544"),l=e.n(c),u=e("b974"),p=Object(n["a"])(a,r,i,!1,null,"411053f8",null);s["a"]=p.exports;l()(p,{VSelect:u["a"]})}}]);
//# sourceMappingURL=chunk-ec9cacee.b3087f0d.js.map